<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Home</title><meta name=keywords content><meta name=description content="Posts - Home"><meta name=author content="Chan"><link rel=canonical href=/posts/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><link rel=icon href=%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Posts"><meta property="og:description" content="This is Chancellor16's Blog"><meta property="og:type" content="website"><meta property="og:url" content="/posts/"><meta property="og:image" content="%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="Chancellor16's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Posts"><meta name=twitter:description content="This is Chancellor16's Blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href accesskey=h title="Cheyne16's Blog (Alt + H)"><img src=/apple-touch-icon.png alt aria-label=logo height=35>Cheyne16's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/categories/ title=categories><span>categories</span></a></li><li><a href=/tags/ title=tags><span>tags</span></a></li><li><a href=https://example.org title=example.org><span>example.org</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href>Home</a></div><h1>Posts
<a href=index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><header class=entry-header><h2>第4章 指令系统</h2></header><div class=entry-content><p>基本概念 **指令(Instruction)**指计算机执行某种操作的命令
**指令系统（ISA Instruction Set Architecture）**也称 指令集架构，一台计算机中所有机器指令的集合
高级语言 - 语句和用法与具体机器的指令系统无关 低级语言 - 面向机器的语言，和具体机器的指令系统密切相关 比较 高级语言 低级语言 通用算法 有 有 语言规则 少 多 编程需要硬件知识 不需要 需要 独立于机器 独立 不独立 编程难易度 易 难 编程时间 短 长 程序执行时间 长 短 编译过程中对计算机资源的占用 多 少 指令格式 基础 指令字（简称指令），即表示一条指令的机器字（机器码）
指令的构成：
操作码字段 - 定义操作 操作数地址字段 - 指定操作数的地址 操作码：表示指令对应的操作。操作码字段的长度取决于计算机指令系统的规模。如某指令系统有8条（种）指令，操作码只需3位即可。指令字中的操作码长度可以使固定的也可以是变长的
按操作数地址数量分类 按照指令中操作数（地址）的个数X（类似于高级语言中函数的参数），可以把指令称为X操作数指令或X地址指令
通常指令可以根据操作数地址数量划分为：
三地址指令 二地址指令 一地址指令 零地址指令 零地址指令：只有操作码，没有地址码
一地址指令：称为单操作数指令，指令中只有一个操作数或者是指令默认以运算器中累加寄存器AC中的数为操作数1，操作结果又放回累加寄存器AC中，类似于高级语言函数中的默认参数。符号表达为(AC) OP (A) -> AC，其中OP表示操作，AC和A表示地址。AC为累加寄存器地址。地址加括号表示取地址中的数据，类似于C语言中对指针的解引用
二地址指令：称为双操作数指令。两个地址码表明两个操作数的地址，结果存放在其中一个地址处。符号表达为(A1) OP (A2) -> A1
三地址指令：指令字中有三个操作数地址。符号表达为(A1) OP (A2) -> A3。A1为被操作数地址或源操作数地址。A1为操作数地址或终点操作数地址。A3为存放结果的地址...</p></div><footer class=entry-footer><span title='2023-02-21 16:29:43 +0000 UTC'>February 21, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;358 words&nbsp;·&nbsp;Chan</footer><a class=entry-link aria-label="post link to 第4章 指令系统" href=/posts/principles-of-computer-organization/%E7%AC%AC4%E7%AB%A0-%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/></a></article><article class=post-entry><header class=entry-header><h2>第5章 中央处理器</h2></header><div class=entry-content><p>中央处理器 中央处理器
CPU的功能 指令控制 控制程序按照顺序执行 操作控制 传送不同的信号 时间控制 各种操作的同步 数据加工 算数逻辑运算 中断处理 对异常情况和特殊请求的处理 CPU的基本组成 控制器与运算器 控制器 由程序计数器PC、指令寄存器IR、指令译码器、操作控制器和时序产生器组成（不包括地址译码器） 运算器 由算数逻辑单元ALU、累加寄存器AC、数据缓冲寄存器DR和状态条件寄存器PSW组成 重要的寄存器 数据缓冲寄存器
DR
存放从cache读出的字或来自外部接口的字或ALU运算结果 写数据cache时也先用DR暂存 用来作为ALU运算结果和通用寄存器之间信息传送时时间上的缓冲 补偿CPU和内存、外设之间速度的差别 指令寄存器
IR
用来保存当前正在执行的一条指令 指令的操作码会流向指令译码器，译码后即可向控制器发出信号 程序计数器
PC
也叫指令计数器。用来保存下一条指令的地址 程序开始执行前先把程序的第一条指令所在地址置入PC CPU会自行修改PC的值 地址寄存器
AR
用来保存当前处理器访问的数据cache中的单元地址 通用寄存器R0-R3
不同的计算机的通用寄存器数量不同。可以几十上百个。教学举例通常使用四个 为ALU提供暂存数据的工作区 其中的累加寄存器AC暂存ALU的运算结果 状态条件寄存器
PSW
根据算数结果、逻辑指令等信息得到了状态条件 包括运算结果进位标志C，运算结果溢出标志V，运算结果为0表示Z，最算结果为负标志N 每个标志位由一个触发器保存 保存中断和系统工作状态等信息 CPU的寄存器中 对用户透明的（不可见的）：存储器地址寄存器、存储器数据寄存器、指令寄存器 可见的：通用寄存器、程序状态寄存器、程序计数器 数据通路 各寄存器之间、寄存器与ALU之间传送数据的通路称为数据通路。信息从哪里出发，中间经过哪个寄存器或多路开关，最后传送到哪个寄存器，都要加以控制。
在各寄存器之间建立数据通路的任务由操作控制器完成
操作控制器 根据指令操作码和时序信号，产生各种操作控制信号，以便正确地建立数据通路
根据设计方法不同，操作控制器可以分为
时序逻辑型 - 使用时序逻辑技术实现，称为硬布线控制器 存储逻辑型 - 使用存储逻辑实现，称为微程序控制器 时序产生器 对各种操作信号进行时间上先后顺序的控制
指令周期 基本概念 冯诺依曼机，即存储程序式计算机，在程序运行前需要把程序和数据放入内存
执行程序流程：
把程序首地址送入PC 从内存cache中取指，执行，并形成下一条指令的地址 自动执行直到程序的最后一条指令 也就是“取指-执行”的循环...</p></div><footer class=entry-footer><span title='2023-02-21 16:29:43 +0000 UTC'>February 21, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;524 words&nbsp;·&nbsp;Chan</footer><a class=entry-link aria-label="post link to 第5章 中央处理器" href=/posts/principles-of-computer-organization/%E7%AC%AC5%E7%AB%A0-%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8/></a></article><article class=post-entry><header class=entry-header><h2>第6章 总线系统</h2></header><div class=entry-content><p>总线系统 总线系统
概念 解决外部设备种类多样的问题。使用相同的总线标准的外设可以在不同计算机之间兼容
缺点：成为信息通道的瓶颈。总线带宽限制了整条总线的吞吐量
总线的层次结构：
早期总线内部结构：
当代总线内部结构：
总线的性能指标 总线宽度 - 数据线的条数 总线传输率（总线带宽） - 每秒传输最大字节或比特数 总线定时协定 - 同步方式、异步方式、半同步方式、分离方式 信号线数 - 地址线、数据线、控制线的总和 总线接口 计算机传输信息有两种基本方式：
串行传送 并行传送 处于速度与效率上的考虑，总线使用并行传送
串行传送 只需要一根传输线，长距离传输有优势。但是速度慢
并行传送 每一位数据需要一根传输线
地址和数据分时传送，即总线的分时复用
总线上的多个部件分时共享总线
接口的基本功能 控制 缓冲 状态控制 转换数据 程序中断 总线仲裁 主设备与从设备 总线事务包括两个部分：
发起命令与地址 传输数据 主设备与从设备之间可以双向数据传输
只有主设备可以给从设备发出命令与地址，是总线事务的发起者
从设备是总线事务的响应者
主设备发出读命令时把数据发送到主设备 主设备发出写命令时接收主设备发来的数据并写入 仲裁基础 总线仲裁解决多个主设备争用总线的问题。因为在外设给CPU发送消息时外设是主设备
总线占用期：主设备持续控制总线的时间
总线仲裁的基本方式：
集中仲裁 链式查询 计数器定时查询 独立请求方式 分布仲裁 集中仲裁由主设备统一管理，就像有红绿灯的十字路口的车辆统一受红绿灯的控制。分布仲裁就像没有红绿灯的十字路口，所有车辆先停下确认没有其他车辆后通行
链式查询方式 总线申请者通过置/BR=0发出总线申请 如果/BR=0且总线空闲(/BB=1)时，总线控制器置BG=1，响应总线请求 若模块没有申请总线却收到了BG=1则继续传递BG=1 若模块发出了总线申请，且/BR=0, /BB=1，此时收到了BG=1，则把BG置0（即不再向下传输），并把/BB置0，表示总线已被占用 使用完总线后把/BB置1表示归还总线 优点：
实现简单，只需要固定数量的控制线实现优先级控制 便于增删总线上的设备，总线控制器的结构与总线上的模块数量无关 缺点：
故障敏感，某个模块故障之后，后面的模块都不能正常查询 仲裁速度慢，主设备越多时间越长 优先级不能改变，低优先级设备可能饿死 计数器定时查询方式 设备申请总线时，通过/BR发出总线请求，中央仲裁器接收到请求后在BB线为0（总线空闲）的情况下启动计数器开始计数，计数值通过一组地址线发给各设备，每个设备接口都有一个设备地址判别电路，当地址线上的计数值与总线请求的设备的设备地址一致时，该设备获得使用权，把BB线置1，计数器暂停计数...</p></div><footer class=entry-footer><span title='2023-02-21 16:29:43 +0000 UTC'>February 21, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;195 words&nbsp;·&nbsp;Chan</footer><a class=entry-link aria-label="post link to 第6章 总线系统" href=/posts/principles-of-computer-organization/%E7%AC%AC6%E7%AB%A0-%E6%80%BB%E7%BA%BF%E7%B3%BB%E7%BB%9F/></a></article><article class=post-entry><header class=entry-header><h2>第7章 外设</h2></header><div class=entry-content><p>外围设备 外围设备
磁盘存储设备 优缺点 优点：
存储量大，位价格低 记录介质可重复使用 记录信息可长期保存不丢失 非破坏性读出 缺点：
存取速度慢 机械结构复杂 工作环境要求高（无尘） 分类 按盘片结构分 可换盘式 固定盘式 按磁头分 可移动磁头 固定磁头 基本组成 磁记录介质 硬质圆形盘片的磁表面存储器 驱动器 写入电路与读出电路 读写转换开关 读写磁头与磁头定位私服系统 磁盘控制器 控制逻辑与时序 数据并-串变换电路和串-并变换电路 磁盘驱动器 对环境要求高，必须在超净的环境下组装
主要包括
定位驱动系统 主轴系统 数据转换系统 磁盘控制器 磁盘存储器是高速外存设备，与主机之间采用成批交换数据方式
是主机与磁盘驱动器之间的接口（控制器），所以有两个接口：
与主机的接口 - 控制外存与主机总线之间交换数据 与设备的接口 - 根据主机命令控制设备的操作 磁盘上信息的分布 磁盘地址：面-磁道-扇区
寻址过程：驱动器号 - 磁头号（面） - 磁道号（柱面） - 扇区号
因为距离圆心的距离不同，磁道长度不同，但是同一面上的不同磁道的信息总量是相同的，所以越远离圆心，磁道上的信息越稀疏
技术指标 存储密度 道密度 - 沿磁盘半径方向单位长度上的磁道数，单位为“道/英寸” 位密度 - 磁道单位长度能记录的二进制代码位数，单位“位/英寸”，随磁道位置的不同而不同。同一张磁盘上有最大位密度和最小位密度 面密度 - 道密度与位密度的乘积，单位“位/平方英寸” 存储容量 一个磁盘存储器所能存储的字节总量。分为格式化容量和非格式化容量 格式化容量 - 按照某种特定的记录格式所能存储信息的总量，也就是用户可以使用的容量 非格式化容量 - 磁记录表面可利用的磁化单元总数=磁头数（面数）*每个面的磁道数（柱面数）每个磁道的扇区数每个扇区的字节数 格式化容量一般为非格式化的60%-70% 平均存取时间 平均寻道时间(seek time) - 把磁头定位到目标磁道上所需的时间。是最大找道时间与最小找道时间的平均值。5-10ms 平均等待时间(rotational latency) - 已经找到指定磁道后需要访问的信息到达磁头下面的时间。简称等待时间，与磁盘转速有关，用磁盘旋转一周所需时间的一半来表示。3-6ms 平均存取时间 = 平均寻道时间 + 平均等待时间 数据传输率 单位时间内能够读出的数据量。等于每个磁道的信息量除磁盘转一周的时间 优化磁盘存储技术 提高磁盘机主轴转速 提高IO总线速度 使用磁盘cache弥补慢速磁盘与高速主存之间的速度差异 独立/廉价磁盘冗余阵列RAID Redundant Arrays of Independent/Inexpensive Disks...</p></div><footer class=entry-footer><span title='2023-02-21 16:29:43 +0000 UTC'>February 21, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;160 words&nbsp;·&nbsp;Chan</footer><a class=entry-link aria-label="post link to 第7章 外设" href=/posts/principles-of-computer-organization/%E7%AC%AC7%E7%AB%A0-%E5%A4%96%E8%AE%BE/></a></article><article class=post-entry><header class=entry-header><h2>第8章 输入输出系统</h2></header><div class=entry-content><p>输入与输出系统 输入与输出系统
外围设备的定时方式和信息交换方式 根据外设速度把外设分类：
速度极慢或简单的外设 CPU只需要接收或者发送数据即可。无条件传送 慢速或者中速的设备 异步传送方式（应答） 高速外设 同步传送 数据传输方式：
程序查询方式(Polling) 程序中断方式 直接存储器存取(DMA: Direct Memory Access) 通道方式（过时） 程序查询方式 最简单的输入输出方式
CPU需要不断查询并等待慢速外设 效率低，CPU与外设不能并行工作。如果外设多，可能还需要链式查询，慢 接口电路简单，硬件开销小 程序中断方式 外设通过接口向CPU发出中断请求，CPU有能力执行中断时转去执行中断，执行完毕后再回到主程序
中断系统是计算机实现中断功能的软硬件总称，一般包括：
在CPU中设置的中断机构 在系统中设置的中断控制器 在软件上设置相应的中断服务程序 中断处理过程：
中断请求 中断排队与判优 中断响应 暂时中断主程序（即现在执行的程序），发出中断响应信号 保存断点（即返回地址） 关中断（不再允许中断） 查找中断源，获取中断服务程序的入口地址 中断处理 保护现场（即保护主程序目前的状态） 中断服务（即给中断源提供服务） 恢复现场并中断返回，开中断（允许中断） 中断源的识别：
单级中断中采用串行排队链实现公共请求线的中断源判优识别 也可以采用中断控制器判断 转中断服务程序的方法：
预先规定中断服务程序的入口地址 或使用中断向量（类似于设备的名字），通过链式查表的方式找到入口地址 如图，使用中断向量和中断控制器，首先根据中断控制器获取中断向量
然后根据中断向量链式查找设备入口地址
单级中断不允许其他程序在中断中再次中断，中断响应不允许嵌套
多级中断通常称为中断嵌套方式，优先级高的中断可以打断优先级低的中断。类似于高级语言中的函数嵌套。使用堆栈保存现场
二维多级中断结构
DMA方式 正常情况下外设从内存获得数据需要通过CPU的中转。而CPU为运算设计，所以单独设计一个用于数据转移的部件DMA控制器
基本思想：通过硬件实现主存与IO设备的直接数据传送，传送过程中无需CPU干预，速度快
过程：
申请阶段 - DMA控制器收到DMA传送请求后向CPU发出总线请求信号申请占用总线 响应阶段 - CPU响应总线请求，释放总线，回送总线应答信号，表示已经让出总线 数据传送阶段 - DMA控制器收到总线应答信号后占用总线，分别向存储器和外设发出读写控制信号，完成数据传送操作，记录传送字的个数 传送结束阶段 - 规定字数传送完毕后DMA控制器以中断方式或状态位的方式向CPU报告，释放总线，CPU重新占用总线 DMA传送方式：
成组传送 传送过程中CPU停止访存 控制简单，适用于数据传输率很高的设备 但是CPU无法处理紧急事件，数据块也不能太大 周期窃取 每次占用一个CPU周期，只让CPU暂停工作一个周期 但是总线申请和归还存在过多的时间开销 DMA与CPU交替访存 不需要总线使用权的申请与归还，总线使用权通过C1和C2分时进行(C1+C2=CPU周期) 也称为透明DMA方式，CPU不停止主程序也不等待 前提条件：CPU工作周期比内存存取周期长很多 通道方式 通道是计算机系统中代替CPU管理外设的独立部件，是一种能执行有限IO指令集的处理机 一个主机可以连接几个通道，每个通道可以连接多个IO设备 通道完成IO操作而不需CPU介入，数据交换结束后向CPU发出中断请求交换数据 通道类型：...</p></div><footer class=entry-footer><span title='2023-02-21 16:29:43 +0000 UTC'>February 21, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;95 words&nbsp;·&nbsp;Chan</footer><a class=entry-link aria-label="post link to 第8章 输入输出系统" href=/posts/principles-of-computer-organization/%E7%AC%AC8%E7%AB%A0-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=/posts/page/7/>«&nbsp;Prev&nbsp;</a>
<a class=next href=/posts/page/9/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href>Home</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>